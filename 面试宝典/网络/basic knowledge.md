
##### 为什么握手是三次而挥手需要四次

握手是通过互相握手来传递信号的一种方式，它通常用于建立网络连接或确认双方的身份。握手的过程通常分为三个步骤：
1. 发送方向接收方发送“请求握手”的信号。
2. 接收方收到信号后，回应发送方“同意握手”的信号。
3. 发送方收到回应后，再次向接收方发送“确认握手”的信号，表示握手成功。

因此，握手过程中需要进行三次交互，才能完成握手操作。
而挥手是指在网络通信中，当一方发起断开连接请求时，另一方进行确认并完成连接断开的过程。挥手的过程通常分为四个步骤：
1. 发起方向接收方发送“请求断开连接”的信号。
2. 接收方收到信号后，回应发送方“同意断开连接”的信号。
3. 接收方向发起方发送“确认断开连接”的信号。
4. 发起方收到回应后，完成连接的断开。

因此，挥手过程中需要进行四次交互，才能完成连接的断开。这是为了确保双方都能正确地完成断开连接的操作。


##### tcp和udp的原理、区别、应用场景

TCP（传输控制协议）和UDP（用户数据报协议）是在网络通信中常用的两种传输协议。它们有不同的原理、特点和适用场景。

TCP的原理：

- TCP是一种面向连接的协议，它通过建立可靠的、双向的通信管道进行数据传输。
- TCP使用三次握手建立连接，确保通信双方的可靠性和数据的完整性。
- TCP提供流控制和拥塞控制机制，使数据传输更稳定可靠。

UDP的原理：

- UDP是一种面向无连接的协议，它不需要先建立连接就能进行数据传输。
- UDP采用简单的数据包交换方式，将数据包发送给目标地址，不关心是否到达或顺序是否正确。
- UDP没有流控制和拥塞控制机制，传输速度快，但容易丢失数据和乱序。

区别：

1. 连接性：TCP是面向连接的，需要在通信双方建立连接后才能进行数据传输；而UDP是无连接的，可以直接发送数据，不需要连接的建立。
2. 可靠性：TCP提供可靠的数据传输，通过确认和重传机制确保数据不丢失和顺序正确；而UDP不提供可靠性保证，数据可能丢失或乱序。
3. 传输效率：TCP在保证可靠性的基础上，会引入额外的开销，传输效率相对较低；而UDP传输效率高，因为没有确认和重传机制的消耗。
4. 应用场景：TCP适用于对数据可靠性要求较高的场景，如文件传输、网页浏览、邮件等；UDP适用于实时性要求较高，且能容忍部分丢失的场景，如音频、视频、实时游戏等。

总结：  
TCP和UDP各有优劣，适用于不同的应用场景。TCP适用于对数据可靠性要求较高的场景，而UDP适用于实时性要求较高，且能容忍部分丢失的场景。

##### TCP慢启动，拥塞控制实现

慢启动（Slow start）：

- 在TCP建立连接或网络拥塞恢复之后，发送方初始时将发送窗口（发送的数据大小）设置为一个较小的值，称为拥塞窗口（Congestion Window）。
- 发送方每收到一个确认（ACK）时，将拥塞窗口的大小加倍。
- 慢启动阶段，发送方的发送窗口将指数级增长，即指数增长窗口（Exponential Growth Window）。
- 慢启动过程中，发送方以指数方式增加发送数据的数量，直到达到一个阈值（拥塞避免阈值）。

拥塞控制（Congestion Control）：

- 当发送方触发网络拥塞时，即接收到的确认数量减少或发生超时，会触发拥塞控制机制。
- 拥塞控制机制将使发送方的拥塞窗口减小，以避免进一步加重网络拥塞。
- 拥塞控制采用加法增加、乘法减小（AIMD）的原则进行调整：
    - 拥塞窗口减小时，以加法减小的方式改变发送窗口大小。
    - 拥塞窗口增加时，以乘法增大的方式改变发送窗口大小。
- 拥塞控制阶段，发送方以线性方式增加发送数据的数量，即线性增长窗口（Linear Growth Window）。

慢启动和拥塞控制机制通过动态调整发送窗口的大小，控制发送方的发送速率，以适应当前网络的拥塞程度，从而避免网络拥塞和数据丢失，并提高传输效率。这种机制使得TCP能够根据网络状况进行自适应调整，以实现可靠而高效的数据传输。

##### HTTP是在OSI模型的哪一层

HTTP（超文本传输协议）是在OSI模型中的应用层。
OSI模型是一种网络通信协议参考模型，由七个不同层级组成，分别为物理层、数据链路层、网络层、传输层、会话层、表示层和应用层。而HTTP协议作为Web通信的基础，位于OSI模型的最上层，也就是应用层。在该层，HTTP负责在客户端和服务器之间传输超文本数据（包括网页、图像、视频等）。


##### HTTPS用到的是对称加密还是非对称加密？分别体现在哪里？

HTTPS使用了对称加密和非对称加密的组合。

首先，在HTTPS握手过程中，会使用非对称加密来确保通信的安全性和验证服务器的身份。这种非对称加密通常是使用公钥加密进行的。服务器将自己的公钥发送给客户端，客户端使用该公钥来加密随机生成的对称密钥。然后，服务器使用自己的私钥来解密该加密信息，得到对称密钥。这样，客户端和服务器都获得了相同的对称密钥，用于后续的通信。

接下来，在建立安全通信后，客户端和服务器通过对称加密算法来加密和解密数据。对称加密使用相同的密钥对数据进行加密和解密，因此速度更快。这个对称密钥是在握手过程中通过非对称加密协商生成的。

对称加密和非对称加密在HTTPS中的体现如下：
- 非对称加密用于安全握手，确保通信的机密性和服务器身份的验证。
- 对称加密用于实际的数据传输，保证通信的高效性和隐私保护。

通过这种组合，HTTPS可以同时提供通信的安全性和效率。

##### http2和http1的区别

* HTTP/2（或称为HTTP2）和HTTP/1 是两个不同版本的HTTP协议。它们之间有一些重要的区别，如下所示：
	1. 多路复用（Multiplexing）：HTTP/2 支持多路复用，可以同时在同一个连接上发送多个请求和响应，而 HTTP/1 需要使用多个连接来处理并发请求。这样可以减少连接的数量，并提高性能和效率。
	2. 二进制分帧（Binary Framing）：HTTP/2 使用二进制分帧机制来传输数据，将请求和响应切分为二进制帧并传输，而 HTTP/1 则是基于文本的协议。二进制帧的格式更加高效，减少了传输开销。
	3. 头部压缩（Header Compression）：HTTP/2 使用了 Huffman 编码对头部信息进行压缩，减少了头部的传输大小，节省了带宽。而 HTTP/1 没有进行头部压缩，每次请求和响应都要重复传输相同的头部信息。
	4. 服务器推送（Server Push）：HTTP/2 支持服务器推送，服务器可以在客户端请求之前主动推送资源给客户端，减少了额外的请求延迟。HTTP/1 则需要客户端发起请求才能获取资源。
	5. 流量控制（Flow Control）：HTTP/2 引入了流控制机制，可以根据接收方的处理能力来控制流量的传输速度，防止由于发送方的速度过快而造成的数据丢失或拥塞。
总的来说，HTTP/2 相比于 HTTP/1 有更好的性能表现，尤其在多并发请求的场景下效果更加显著。它提供了更高的吞吐量、更低的延迟和更有效的网络利用率。然而，无论是使用 HTTP/1 还是 HTTP/2，都要根据具体场景和需求来选择合适的协议版本。

##### http1.0/1.1/2/3

* HTTP/1.0、HTTP/1.1、HTTP/2 和 HTTP/3 是不同版本的HTTP协议，它们各自有特定的特性和改进。
	1. HTTP/1.0：这是最早的HTTP协议版本，最初引入于1996年。它是一个简单的、无状态的请求-响应协议，并且每个请求都需要单独建立一个TCP连接。HTTP/1.0 版本没有持久连接、管道化和请求优先级等特性。
	2. HTTP/1.1：HTTP/1.1 是 HTTP/1.0 的升级版，推出于1999年。它引入了持久连接（Keep-Alive Connection），允许多个请求和响应通过同一个TCP连接进行传输，减少了连接建立和关闭的开销。此外，HTTP/1.1 还支持管道化（Pipelining），允许客户端发送多个请求，在没有等待响应的情况下继续发送后续请求。
	3. HTTP/2：HTTP/2 是在2015年发布的新版本，旨在提供更好的性能和效率。它引入了二进制分帧（Binary Framing），多路复用（Multiplexing），头部压缩（Header Compression）等特性。HTTP/2 允许在同一个连接上并发发送多个请求和响应，并使用二进制格式来划分和传输数据。这些改进使得HTTP/2 更快且更有效地使用网络资源，提供更低的延迟和更高的吞吐量。
	4. HTTP/3：HTTP/3 是在2020年发布的最新版本，基于UDP协议，而不是之前版本的TCP。HTTP/3 在传输层使用了QUIC协议，它提供了更好的容错性、传输速度和拥塞控制。使用QUIC协议可以更好地适应高延迟和带宽限制的网络环境。HTTP/3 在功能上与HTTP/2 类似，但在传输层有较大的改进。

总结来说，这些不同版本的HTTP协议都有自己的优势和适应场景，选择使用哪个版本取决于具体的需求和服务器/客户端的支持程度。目前，HTTP/2 已成为常见的标准，并逐渐取代了HTTP/1.1。HTTP/3 正在逐步推广，但尚未被广泛采用。

##### get和post区别

* HTTP 协议中的 GET 和 POST 是两种常见的请求方法，用于在客户端和服务器之间传输数据。它们之间的主要区别如下：
	1. 请求语义：GET 用于读取资源，从服务器获取数据，而不对服务器上的任何数据进行修改。POST 用于向服务器提交数据，并可能会对服务器上的数据进行修改。
	2. 数据传输方式：GET 请求中的数据是通过 URL 参数传递的，数据会附加在 URL 的查询字符串中。而 POST 请求将数据封装在请求的主体部分中进行传输，而不会显示在 URL 中。
	3. 参数长度限制：由于 URL 有长度限制，GET 请求中传递的数据大小也有一定限制，一般不宜超过 2048 个字符。而 POST 请求中的数据大小理论上没有限制。但实际应用中，可能会受到服务器或网络的限制。
	4. 安全性：GET 请求的参数会显示在 URL 中，因此可能会被保存在浏览器历史记录、服务器日志等地方。这意味着敏感信息（如密码）不应该通过 GET 请求传输。POST 请求的参数则不会显示在 URL 中，相对较安全。
	5. 缓存：GET 请求可以被浏览器缓存，如果请求的 URL 相同，浏览器可以直接从缓存中读取数据，提高性能。而 POST 请求无法被缓存。
	6. 幂等性：GET 请求是幂等的，相同的请求多次发送不会对服务器产生副作用。而 POST 请求可能会对服务器上的数据进行修改，不是幂等的。

综上所述，GET 适合用于获取数据，不涉及对服务器数据的修改，而 POST 适合用于提交数据，可以对服务器上的数据做出修改。选择使用哪种请求方法要根据实际需求和安全性考虑。

##### tcp/ip五层模型

* TCP/IP五层模型是一种常用的网络协议参考模型，用于描述和组织计算机网络中的协议和功能。它包含以下五个层次：
	1. 应用层（Application Layer）：应用层是最靠近用户的一层，提供用户与网络应用程序之间的接口。在应用层中，应用程序通过各种协议（如HTTP、SMTP、FTP等）与网络通信。它负责处理用户数据和呈现给用户的内容。
	2. 传输层（Transport Layer）：传输层主要负责在网络中可靠地传输数据。该层提供端到端的通信控制和连接管理，其中最常见的协议是传输控制协议（TCP）和用户数据报协议（UDP）。
	3. 网络层（Network Layer）：网络层处理数据包的路由和转发，确定数据的最佳路径。主要的网络层协议是因特网协议（IP），定义了在网络上进行数据传输的方式。
	4. 数据链路层（Data Link Layer）：数据链路层负责将数据传输转换为适当的信号形式，以在物理媒体上进行传输。它通过物理地址（MAC地址）来寻址和传输帧，常见的数据链路层协议有以太网（Ethernet）和Wi-Fi。
	5. 物理层（Physical Layer）：物理层是最基础的一层，处理计算机与网络媒体之间的物理连接。它负责在物理介质上发送和接收原始比特流，并定义了传输速率、电压等物理参数。

这些层次构成了一个层次化的网络协议体系，每个层次具有不同的功能和责任，通过上下层之间的接口交互以实现网络通信。TCP/IP五层模型是对实际网络中的协议和功能进行抽象和分层的方式，为网络设计和开发提供了基本的指导和标准化。


##### dns服务器用的是什么协议

DNS（Domain Name System）服务器使用的是UDP（User Datagram Protocol）协议和TCP（Transmission Control Protocol）协议。

通常情况下，DNS查询使用UDP协议。UDP是一种无连接的传输协议，它提供了一种快速的、不可靠的数据传输方式。DNS查询通常是短小的请求-响应模式，适合使用UDP进行快速处理，而不需要建立长时间的连接。

然而，对于一些特殊情况，如大型DNS区域传输（DNS zone transfer）或DNS响应数据包超过UDP发送限制的情况，DNS服务器可以使用TCP协议。TCP是一种面向连接的传输协议，它可以提供可靠的、有序的数据传输。通过TCP，DNS服务器可以确保数据的完整性和可靠性，并处理较大的数据传输。

因此，DNS服务器既可以使用UDP协议进行常规的查询和响应，也可以使用TCP协议进行特殊情况下的传输和大数据量的处理。具体使用哪种协议取决于服务器的配置和传输需求。

##### ping命令 用的是什么协议。在哪一层

Ping命令使用的是ICMP（Internet Control Message Protocol）协议，在网络模型中，ICMP位于网络层，与IP协议紧密相关。
Ping命令用于测试网络连接和检测目标主机的可达性。它发送一个ICMP Echo Request消息给目标主机，如果目标主机正常运行并能应答，它会返回一个ICMP Echo Reply消息。通过测量往返时间（RTT）和丢包率等指标，我们可以评估网络的性能和目标主机的响应状态。
ICMP协议本身位于网络层，用于向网络上的其他设备发送和接收控制消息。它与IP协议配合使用，可以向其他设备发送各种类型的消息，如Echo Request和Echo Reply消息用于Ping命令、Destination Unreachable消息用于通知主机无法到达目标、Time Exceeded消息用于指示数据包在传输过程中的超时等。
因此，Ping命令使用ICMP协议作为其核心的通信协议，以在网络层进行网络连通性的测试和目标主机的可达性检查。

##### 能详细讲一下有限状态机怎么解析http报文吗

有限状态机（Finite State Machine，FSM）是一种用于描述系统行为的数学模型。它由一组状态、转移条件和动作组成，可以用于解析和处理各种协议、编程语言等。

在解析HTTP报文时，可以使用有限状态机来处理和理解报文的结构和语义。下面是一个简化的示例，描述了解析HTTP请求报文的有限状态机的基本流程：
1. 开始状态（Start State）：初始状态，等待接收HTTP请求报文的起始行。
2. 解析起始行（Parse Start Line）：根据报文格式解析起始行，提取请求方法、目标URL和HTTP版本等信息。
3. 解析请求头（Parse Header）：解析请求报文的各个首部字段，如Host、Content-Type等。根据具体需求和报文格式，可以定义进一步的状态转移。
4. 解析请求体（Parse Body）：如果有请求体（如POST请求），则解析请求体中的数据。状态转移规则可根据实际需求进行定制。
5. 完成解析（Parse Complete）：解析完整个报文后，可以进行相应的处理逻辑，例如根据请求方法执行相应的操作，构建响应报文等。

在解析过程中，状态机通过不同的状态和转移条件进行控制，根据收到的数据和解析规则切换状态，逐步解析整个报文。如果遇到不符合规则的数据或格式错误，可以定义相应的错误状态和处理逻辑。

需要注意的是，上述是一个简化的状态机示例，实际的HTTP解析可能还涉及更复杂的处理，如处理分块传输编码、解析多部分内容等特殊场景。

使用有限状态机解析HTTP报文可以有效组织和管理报文解析过程，使得代码结构清晰、可扩展，并且能够灵活应对不同的HTTP报文格式和协议规范。